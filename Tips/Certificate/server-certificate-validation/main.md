## はじめに

サーバ証明書を、第3者 CA に検証してもらう流れについて、ざっくりまとめました。備忘録です。

記事目安...10分

[:contents]

## 解説

図で表してみます。

[f:id:swx-sugaya:20201214123813p:plain]

---

〇各作業の詳細

① *hogehoge* サーバ管理者が、秘密鍵ファイル ( *hogehoge.key* )から、 署名要求ファイル( *hogehoge.csr* ) を作成します。

② *hogehoge* サーバ管理者が、署名要求ファイル( *hogehoge.csr* ) の正当性を保証するために、第3者の CA に電子署名を要求します。

③第3者 CA が、署名要求ファイル( *hogehoge.csr* )　をハッシュ関数でハッシュ化します。

④第3者 CA が、自身の秘密鍵ファイル( *CA.key* ) を使用して、ハッシュ値を暗号化します。

⑤第3者 CA が、署名要求ファイル( *hogehoge.csr* ) と、暗号化したハッシュ値を組み合わせて、サーバ証明書ファイル( *hogehoge.crt* ) を作成します。

④第3者 CA が、 *hogehoge* サーバ管理者に、サーバ証明書ファイル( *hogehoge.crt* )を引き渡します。

---

第3者 CA が持つ秘密鍵ファイル (*CA.key* ) と対になる公開鍵ファイル (*CA-pub.key*) は広く公開されます。  
この公開鍵は、 *hogehoge* サーバに接続したクライアントユーザが、サーバ証明書ファイル( *hogehoge.crt* ) に記載された暗号化されたハッシュ値を、復号化する際に取得・使用します。

## まとめ

認識間違っているところがあればコメントいただけると幸いです。

ご覧いただきありがとうございました。
